#!/bin/sh

set -e

name="$1"
if [ -z "$name" ]; then
	echo "Which container?"
	echo
	lxc-ls --fancy
else
	# --clear-env is absolutely required for security and non-broken behavior
	# we run su because it sets a bunch of environmental variables (incl $HOME and $PATH)
	lxc-attach --clear-env -n "$name" su
fi
